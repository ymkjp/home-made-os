----------------------------------------------------------------------
                      OSASK/AT ver.4.7 操作説明書
----------------------------------------------------------------------

  OSASKの使い方の説明です。インストールや準備については, インストール
説明書をご覧ください。

1.終了方法
~~~~~~~~~~
　Ctrl+Alt+Deleteでリセットできます。あるいは, リセットスイッチか電源
スイッチを押してください。ディスクアクセス中でなければ, いつ電源を切っ
てもいいように設計してあります。


2.ウィンドウについて
~~~~~~~~~~~~~~~~~~~~
　一番上にあるウィンドウのみタイトルバーが青くなり, 操作できます。これ
をアクティブになっているといいます。アクティブではないウィンドウは灰色
になったり黒くなったりします。
　ウィンドウが重なると, 下になったウィンドウはタイトルバーが黒くなり,
一切描画されません。これはバグではなくて仕様です。他のOSのように下にな
ってもちゃんと描画するようにもできますし, 将来はそうすることになるでし
ょうが, 今はこの仕様で我慢してください。
　なお, 下にある灰色の領域は「雰囲気」です (笑) 。


3.マウス操作
~~~~~~~~~~~~
　PS/2マウスが接続されていればマウスカーソルが動きます。USBマウスは使
えません。また, 画面の端にカーソルを持っていくと, 仮想画面のある限りス
クロールします。
　マウスのどのボタンでも, クリックしたウィンドウをアクティブにすること
ができます。その後でウィンドウを閉じたり移動したりできます。


4.キー操作
~~~~~~~~~~
　現在、OSASKが認識するキー操作は, 以下の10種類です。
他のキーは基本的にアプリケーションへの入力として扱われます。

  ・Ctrl+Alt+Delete
    リセットします。

  ・F1
    画面モードを640x480 16色に切り換えます。

  ・F2
    画面モードを800x600 16色に切り換えます。

  ・F3
    画面モードを1024x768 64K色に切り換えます (pokonのsetvesaコマンド
    で割り当てを変えられます)。起動するとこの画面モードに切り替わる
    はずです (非対応のビデオカードでは上の640x480 16色になります)。

  ・F4
    画面モードを1280x1024 256色に切り換えます (pokonのsetvesaコマンド
    で割り当てを変えられます)。

※画面からはみ出すウィンドウがある場合, 画面モード切り替えはできません。

  ・F5
    フォントファイルを読み込みます (この操作をしなくても必要に応じて自
    動的に読み込みます) 。

  ・F7
    壁紙の表示・非表示を切り換えます。壁紙については 8.壁紙 を見てくだ
    さい。

  ・F9 または Alt+Tab
    一番下のウィンドウを一番上に出します。

  ・F10
    一番上と二番目のウィンドウを入れ換えます。

  ・F11
    ウィンドウを移動します。カーソルキーで移動, Enterで終わります。

  ・F12 または Alt+F4
    ウィンドウを閉じます。


5.pokonランチャー
~~~~~~~~~~~~~~~~~
　OSASK ver.4.7が起動すると, すぐにアプリケーションランチャーpokonが出
ます。pokonはファイルを選択して起動することなどができます。
　またアプリケーションが出すファイル選択ウィンドウもpokonの一部ですの
で, 以下の説明と同じ操作 (ディスク入れ換えなど) ができます。


5.1.pokonの操作
~~~~~~~~~~~~~~~
  まずはキー操作から。

  ・カーソルキー上下
    ファイルを選択します。

  ・カーソルキー左右
    ページ単位でカーソルを移動します。左で上に, 右で下に行きます。

  ・PageUp, PageDown
    ページ単位でスクロールします。

  ・適当な文字
    その文字で始まるファイルを順に選択します (サーチ) 。今のところファ
    イル名は全て大文字で始まっています。大文字を入力してください。

  ・Enter
    選択したファイルを実行します (開きます) 。

  ・Ctrl+0 から Ctrl+9
    CFやハードディスクを使っているとき, 使うディスクイメージを切り換え
    ます (0から9がFDIMAGE0.BINからFDIMAGE9.BINに対応)。ディスク入れ換え
    と同じように扱われます。

  ・Ctrl+T
    選択したファイルをteditc02で開きます。

  ・Ctrl+B
    選択したファイルをbeditc00で開きます。

  ・Ctrl+U
    選択したファイルをmcopyc1でコピーします。

  ・Ctrl+C
    へっぽこコンソールが出ます。

  ・Insert
    ディスクの内容を読み込み直します。ディスクを入れ換えたら入力してく
    ださい。ただし, 書き換えたファイルがあると使えません。その時はディ
    スクを戻してDeleteキーを押してください。
    また, この操作をすると開いてあるファイルは全て出所不明のファイルと
    なり, 書き戻せなくなります。

  ・Shift+Insert
    ディスクの強制入替えです。変更したファイルのことは忘れます。

  ・Delete
    ファイルの変更をディスクに書き戻します。Insertキーを押した時と同じ
    ディスクを入れておいてください。さもないとディスク上のファイルが壊
    れます。

  ・Shift+Delete
    書き換えたファイルを検出します。検出するとpokonの文字が赤くなりま
    す。これはファイルを閉じる時などに自動で行われますから, 使う必要は
    ありません。

  ・Ctrl+S
    1)ソート切替えです。ファイル名ソートと拡張子ソートを切替えます。

    2)直接起動ディスク作成モード中に使うフォーマットスキップキーです。
    普通は使いません。

  ・Ctrl+F
    直接起動ディスク作成モードになります。詳しくは, インストール編の
    6.OSASKで直接起動ディスクを作る をご覧ください。

  ・Ctrl+R
    直接起動ディスク作成モードを終わります。

  マウスでも操作できます。ダブルクリックは無くて, 全てシングルクリック
として認識されます。

  ・スクロールバー
    普通のスクロールバーです (^_^;

  ・選択していないファイル名をクリック
    そのファイルを選択します。

  ・選択しているファイル名をクリック
    そのファイルを実行します (開きます)。


5.2.pokonでアプリケーションを起動
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
　pokonがファイルの関連付けを知っているので, 全てのファイルをpokonで
「開く」ことができます (拡張子を使うのは本来の仕様ではありませんが) 。

  ・BIN
    アプリケーションです。DRVSPACE.BINなど違うものも混じりますが, それ
    は勝手に区別します。

  ・BMP
    BMP画像です。PICTURE0を使って表示します。

  ・HEL
    へらへらアニメデータです。HELOを使って再生します。

  ・JPG
    JPEG画像です。PICTURE0をつかって表示します。

  ・MML
    テキスト形式の楽譜です。MMLPLAYを使って再生します。

  ・PSF
    へっぽこコンソールpokoのスクリプトファイルです。コンソールが開いて
    いなければ実行します。

  ・TXT
    テキストファイルです。TEDITC02を使って表示します。

  ・WRP
    WABAのアーカイブです。WABAを使って実行します。

  ・5TQ
    GyOTAK2用問題データです。GyOTAK2を使って実行します。
    (OSASK0.PSFでの設定です。)

  ・その他
    BEDITC00を使って表示します。

　アプリケーションディスクとOSASK起動ディスクは別々でも一緒でもかまい
ません。しかし, 一緒の方がディスクを入れ換える手間が省け便利でしょう。


5.3.pokonでファイル操作
~~~~~~~~~~~~~~~~~~~~~~~
　pokonでファイル操作ができます。

  ・Ctrl+Shift+C (create)
    NEW_FILEというファイルを作ります。すでにある時は作れません。

  ・Ctrl+Shift+D (delete)
    選択してあるファイルを削除します。

  ・Ctrl+Shift+S (size)
    resizer0を使ってファイルの大きさを変えます。ファイルの今の大きさが
    表示されるので, 数を入力してEnterキーを押してください。

　ファイルを誤って消した場合も慌てないでください。pokonにDeleteキーを
入力するまでは, ディスクに影響しません。Shift+Insertを入力すれば元に戻
ります。


5.4.画面モード切り替えスクリプト
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  V-640-16.PSF などのスクリプトが付属しています。実行すると画面モード
が切り替わります。最初の数字は画面幅, 次の数字は画素のビット数を表わし
ています (8は256色, 16は64K色, 32は16M色モードを表します)。
  ビデオカードが対応していない画面モードには切り替えられません。また,
へっぽこコンソールが開いている間はスクリプトが実行できませんので, コン
ソールを閉じてから使ってください。


6.へっぽこコンソールpoko
~~~~~~~~~~~~~~~~~~~~~~~~
　pokonがアクティブになっている時に, 'Ctrl+C'を入力するとコンソールウ
ィンドウが出ます。このコンソールはCUIアプリのための立派なコンソールで
はなく, いろいろな開発中の機能を使ってみるためのおまけです (笑)。
　このコンソールで使えるコマンドをいくつか紹介します。

  ・memory
  ・tasklist
    現在の状態を表示するだけのコマンドです。使ってみればすぐに分かるで
    しょう。

  ・mouseaccel n m
    n, mの部分はパラメーターで, カーソルの速さがnより大きくなるとm倍に
    加速されるという仕組みになっています。nは1か2, mは2〜4くらいにして
    みましょう。

  ・rename file1 file2
    ファイルの名前を変更します。file1が変更前の名前でfile2が後の名前で
    す。MS-DOSでは許されない字も使えますが, それはやめてください。

  ・sendsignalU N sig
    N番のタスクにシグナルsigを送信します。
      ・F2を押したことにする (800x600で起動)
        senddignalU 3 0x205
      ・F5を押したことにする (フォントの読み込み)
        sendsignalU 3 0x240
      ・F7を押したことにする (壁紙の読み込み)
        sendsignalU 3 0x248
      ・キーボードをUS101モードにする
        sendsignalU 3 0x10001

  ・defkeybind
  ・defspkeybind
    キーボードの配置を変えるコマンドです。これを使うにはOSASKのソース
    があったほうがいいのですが, よくある設定だけ紹介しておきます。
      ・キーボードのCtrlとCapsLockを完ぺきに入れ替える
        defspkeybind 16 0x1d 0x0010c070
        defspkeybind 46 0x3a 0x0000c000
        defspkeybind 52 0x3a 0x4000c000
        defkeybind 0xb2 0x1d 1 0xff 0xff
        defkeybind 0xb5 0x3a 254 0x9d 254

  ・vesalist N
    N は 1,2,3 のうちのどれかの数字です。それぞれ, 8bpp, 16bpp, 32bpp
    の使える画面モードと番号が列挙されます。none と表示される場合, その
    モードは使えません。
      例:
      poko>vesalist 1
      VESA-2 BIOS is found.
       101.  640x 480 L    103.  800x 600 L
       105. 1024x 768 L

      poko>vesalist 3
      VESA-2 BIOS is found.
       - none -

  ・setvesa N 0x###
    N は 0,3,4,-3,-4 のうちのどれかの数字です。0x### は vesalist で表示
    される画面モード番号を ### に当てはめたものです。
      ・3, 4の場合は, F3/F4への割り当てと同時に切り替え
      ・-3, -4の場合は, 割り当てだけ
      ・0の場合は, 切り替えだけ
      例:
      poko>setvesa 3 0x105
      poko>setvesa 4 0x117

  ・drvcf N
    N は0から9までの数字で, その番号のPCカードスロットにささっているCF
    のディスクイメージを使うようにします。ただし, Nが9だとドライブなし
    になります (CFもハードディスクもフロッピィも使えなくなります)。
    書き変えたファイルがあるときは無効になります。
    スクリプトでは使えません。

  ・drvata N
    Nは0から3の数字です。それぞれ,
     0. プライマリ マスター
     1. プライマリ スレーブ
     2. セカンダリ マスター
     3. セカンダリ スレーブ
    のハードディスクに対応していて, そのハードディスクの第一区画にある
    ディスクイメージを使うようにします。
    書き変えたファイルがあるときは無効になります。
    スクリプトでは使えません。

  ・drvfd 0
    従来通りにフロッピィを使うようにします。
    書き変えたファイルがあるときは無効になります。

  ・setwallpaper FILE
    FILEを壁紙にします。FILEに何も書かないと, 壁紙無しになります。

  ・setext EXT FILE
    拡張子EXTにFILEというプログラムを関連付ます。拡張子に"."を付けては
    いけません。

  ・setext .A FILE
    pokonのCtrl+AキーにFILEというプログラムを関連付けます。Ctrl+bで
    bball.binを起動するなら, setext .b bball.bin とします。

6.1.起動スクリプト
~~~~~~~~~~~~~~~~~~
　起動時にOSASK0.PSFというファイルを読み込んで, それをpokoのコマンドと
して実行するようになっています。行に一つづつコマンドを書いておいてくだ
さい。起動時にフォントや壁紙を読み込ませたり設定をすることができます。
  不備により, drvataコマンドとdrvcfコマンドは使えません。


7.圧縮ファイル
~~~~~~~~~~~~~~
　独自形式の圧縮ファイルが使えます。ただし, OSとしては読み込みだけしか
サポートしていないので, 圧縮ファイルは書き換えても書き戻し対象になりま
せん。保存したい場合はmcopyc1を使ってコピーすると正しく保存できます。

　OSASKで使えば書き戻し以外は今までと変わりませんが, 他のOSでは圧縮さ
れたまま見えてしまいます。伸長したファイルを見たい場合も, mcopyc1を使
ってコピーしてください。伸長したものが保存されます。


8.壁紙
~~~~~~
　2色, 16色, 256色, 16M色のBMP(ランレングス圧縮未対応)と, ベースライン
JPEGが使えます。常にセンタリングされます。

  画面モードを変えると壁紙が消えますが, 自動で貼り直すようにはなってい
ません。もういちど貼り直してください。


9.困った時には
~~~~~~~~~~~~~~
　こんなことがあったら, 動作確認報告する前にちょっとチェックしてみてく
ださい。


9.1.OSASKが起動しない！
~~~~~~~~~~~~~~~~~~~~~~~
→フロッピーディスクが劣化していませんか？
    OSASKはディスクの劣化にちょっと敏感なようです。もし古いディスクで
    やっていたら, 新しいディスクでもう一度やり直してみてください。

→PS/2マウスは接続されていますか？
    機種によっては、PS/2マウスが接続されていないと起動しないようです。
    USBマウスは接続しても認識しないので, 適当なPS/2マウスを付けてみて
    ください。

→シリアルマウスが接続されていませんか？
    機種によっては、シリアルマウスが接続されていると起動中にハングアッ
    プするようです。取り外してみてください。


9.2.OSASKのマウスの動きが遅い！
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
→mouseaccelコマンドを使ってみましょう。
    最初は mouseaccel 2 3 という設定になっています。mouseaccel 1 3 く
    らいにするといいかも知れません。


9.3.テキストファイルが編集できない！
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
→そのファイルを他のタスクで開いていませんか？
    複数のタスクが同じファイルを使っていると, 編集作業の大半がキャン
    セルされます。面倒ですが, 該当するアプリをみんな閉じてください。
    そうすれば編集できるようになります。
    将来のバージョンでは, この制限はなくなります。

9.4.画面モードが変わらない！
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
→狭い画面モードにしようとしていませんか？
    ウィンドウが変更後の画面からはみ出すために, あきらめています。大き
    すぎるウィンドウを閉じるとか, さもなくばもっと左上の方に移動してや
    るなどして, もう一度試してください。


10.動作確認報告のお願い
~~~~~~~~~~~~~~~~~~~~~~~
　正しく動作しない機能があった場合などは, 状況を教えていただけると助か
ります。今後の開発の参考にします。以下の方法のいずれかでお願いします。

  ・OSASK-MLに投稿
  ・OSASK-ML投稿/閲覧フォームに書き込む
  ・川合秀実にメールを出す

  川合秀実あてのメールは, プライバシーに関わる問題が無いかぎり控えてく
ださい。MLやOSASK伝言板, 2ちゃんねるなどの方が早く回答が得られます。

----------------------------------------------------------------------
説明書に関するお問い合わせはあっきぃ<akkiesoft＠marokun.net>まで
